{% raw %}
    <div class="ets_fs_ic_box_wrapper ets_fs_ic_alignment_{{ alignment }}">
        {% if isNoResult == false %}
        <div class="ets_fs_ic_wrapper layout1 desktop {% if alignment %} {{ alignment }} {% endif %}">
            <div class="ets_fs_ic_sections">
                {% for search_type in search_types %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: search_type %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}


                {% if data[search_type.value].total > 0 %}
                <div class="ets_fs_ic_section_item ets_fs_ic_section_{{ search_type.value }} ">
                    <div class="ets_fs_ic_section_header">
                        <div class="ets_fs_ic_section_title">{{ search_type.label }}</div>
                        <span class="ets_fs_ic_section_total"><span class="ets_fs_ic_section_total_nb">{% if init %}--{% else %}({{ data[search_type.value].total }}){% endif %}</span></span>
                    </div>
                    {% if search_type.value == 'suggestions' %}
                    <div class="ets_fs_ic_section_body">
                        <ul class="ets_fs_ic_list_result">
                            {% for item in data[search_type.value].list  %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: item %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

{% comment %} Wholesale_Club_Item_Prices Start {% endcomment %}
{% if item.product %}{% assign base_product = item.product %}{% else %}{% assign base_product = item %}{% endif %}
{% if item.variant %}{% assign base_variant = item.variant %}{% else %}{% assign base_variant = item.selected_or_first_available_variant %}{% endif %}

{% if shop.metafields.sawholesale['base_price'] == blank %}
  {% assign base_price = 'compare_at_price' %}
{% else %}
  {% assign base_price = shop.metafields.sawholesale['base_price'] %}
{% endif %}

{% assign saw_discount = 0 %}{% assign saw_has_discount = false %}

{% if customer.tags != blank %}
  {% for mf in base_product.metafields.sawholesale %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: mf %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

    {% capture product_customer_tag %}{{ mf | first | replace: 'discount_', '' }}{% endcapture %}
    {% if customer.tags contains product_customer_tag %}
      {% assign saw_has_discount = true %}
      {% assign discount_key = product_customer_tag | prepend: 'discount_' %}
      {% assign price_key = product_customer_tag | prepend: 'price_' %}
      {% assign saw_discount = base_product.metafields.sawholesale[discount_key] | divided_by: 100.0 %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign saw_discount = 1 | minus: saw_discount %}

{% if base_price == 'price' or base_variant.compare_at_price == blank  or base_variant.compare_at_price == 0 or base_variant.compare_at_price < base_variant.price %}
  {% assign saw_variant_compare_at_price = base_variant.price %}
{% else %}
  {% assign saw_variant_compare_at_price = base_variant.compare_at_price %}
{% endif %}

{% assign cpe = shop.metafields.sawholesale['cpe'] | default: "true" %}
{% if base_variant.metafields.sawholesale[price_key] != blank and cpe == "true" %}
  {% assign saw_variant_price = base_variant.metafields.sawholesale[price_key] %}
{% else %}
  {% assign saw_variant_price = saw_variant_compare_at_price | times: saw_discount %}
{% endif %}

{% if saw_has_discount == false or saw_variant_price >= saw_variant_compare_at_price %}
  {% assign WCItem_OriginalPrice = item.original_price %}
  {% assign WCItem_FinalPrice = item.final_price %}
  {% assign WCItem_Price = item.price %}
  {% assign WCItem_PriceMin = item.price_min %}
  {% assign WCItem_PriceMax = item.price_max %}
  {% assign WCItem_CompareAtPrice = item.compare_at_price %}
  {% assign WCItem_CompareAtPriceMin = item.compare_at_price_min %}
  {% assign WCItem_CompareAtPriceMax = item.compare_at_price_max %}
  {% assign WCItem_OriginalLinePrice = item.original_line_price %}
  {% assign WCItem_FinalLinePrice = item.final_line_price %}
  {% assign WCItem_LinePrice = item.line_price %}
{% else %}
  {% assign WCItem_OriginalPrice = saw_variant_compare_at_price %}
  {% assign WCItem_FinalPrice = saw_variant_price %}
  {% assign WCItem_Price = saw_variant_price %}
  {% assign WCItem_PriceMin = item.price_min | times: saw_discount %}
  {% assign WCItem_PriceMax = item.price_max | times: saw_discount %}
  {% assign WCItem_CompareAtPrice = saw_variant_compare_at_price %}
  {% if base_product.compare_at_price_min != 0 %}{% assign WCItem_CompareAtPriceMin = base_product.compare_at_price_min %}{% else %}{% assign WCItem_CompareAtPriceMin = base_product.price_min %}{% endif %}
  {% if base_product.compare_at_price_max != 0 %}{% assign WCItem_CompareAtPriceMax = base_product.compare_at_price_max %}{% else %}{% assign WCItem_CompareAtPriceMax = base_product.price_max %}{% endif %}
  {% assign WCItem_OriginalLinePrice = WCItem_OriginalPrice | round | times: item.quantity %}
  {% assign WCItem_FinalLinePrice = WCItem_FinalPrice | round | times: item.quantity %}
  {% assign WCItem_LinePrice = WCItem_Price | round | times: item.quantity %}
{% endif %}
{% comment %} Wholesale_Club_Item_Prices End {% endcomment %}

                            <li class="ets_fs_ic_data_item"><a onclick="return etsFsOnClickSuggestion(this, '{{ item.key_word }}')" class="ets_fs_ic_link_item" href="/pages/search-result-data?q={{ item.key_word }}">{{ item.key_word }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% else %}
                    <div class="ets_fs_ic_section_body">
                        <ul class="ets_fs_ic_list_result">
                            {% for item in data[search_type.value].list  %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: item %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

{% comment %} Wholesale_Club_Item_Prices Start {% endcomment %}
{% if item.product %}{% assign base_product = item.product %}{% else %}{% assign base_product = item %}{% endif %}
{% if item.variant %}{% assign base_variant = item.variant %}{% else %}{% assign base_variant = item.selected_or_first_available_variant %}{% endif %}

{% if shop.metafields.sawholesale['base_price'] == blank %}
  {% assign base_price = 'compare_at_price' %}
{% else %}
  {% assign base_price = shop.metafields.sawholesale['base_price'] %}
{% endif %}

{% assign saw_discount = 0 %}{% assign saw_has_discount = false %}

{% if customer.tags != blank %}
  {% for mf in base_product.metafields.sawholesale %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: mf %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

    {% capture product_customer_tag %}{{ mf | first | replace: 'discount_', '' }}{% endcapture %}
    {% if customer.tags contains product_customer_tag %}
      {% assign saw_has_discount = true %}
      {% assign discount_key = product_customer_tag | prepend: 'discount_' %}
      {% assign price_key = product_customer_tag | prepend: 'price_' %}
      {% assign saw_discount = base_product.metafields.sawholesale[discount_key] | divided_by: 100.0 %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign saw_discount = 1 | minus: saw_discount %}

{% if base_price == 'price' or base_variant.compare_at_price == blank  or base_variant.compare_at_price == 0 or base_variant.compare_at_price < base_variant.price %}
  {% assign saw_variant_compare_at_price = base_variant.price %}
{% else %}
  {% assign saw_variant_compare_at_price = base_variant.compare_at_price %}
{% endif %}

{% assign cpe = shop.metafields.sawholesale['cpe'] | default: "true" %}
{% if base_variant.metafields.sawholesale[price_key] != blank and cpe == "true" %}
  {% assign saw_variant_price = base_variant.metafields.sawholesale[price_key] %}
{% else %}
  {% assign saw_variant_price = saw_variant_compare_at_price | times: saw_discount %}
{% endif %}

{% if saw_has_discount == false or saw_variant_price >= saw_variant_compare_at_price %}
  {% assign WCItem_OriginalPrice = item.original_price %}
  {% assign WCItem_FinalPrice = item.final_price %}
  {% assign WCItem_Price = item.price %}
  {% assign WCItem_PriceMin = item.price_min %}
  {% assign WCItem_PriceMax = item.price_max %}
  {% assign WCItem_CompareAtPrice = item.compare_at_price %}
  {% assign WCItem_CompareAtPriceMin = item.compare_at_price_min %}
  {% assign WCItem_CompareAtPriceMax = item.compare_at_price_max %}
  {% assign WCItem_OriginalLinePrice = item.original_line_price %}
  {% assign WCItem_FinalLinePrice = item.final_line_price %}
  {% assign WCItem_LinePrice = item.line_price %}
{% else %}
  {% assign WCItem_OriginalPrice = saw_variant_compare_at_price %}
  {% assign WCItem_FinalPrice = saw_variant_price %}
  {% assign WCItem_Price = saw_variant_price %}
  {% assign WCItem_PriceMin = item.price_min | times: saw_discount %}
  {% assign WCItem_PriceMax = item.price_max | times: saw_discount %}
  {% assign WCItem_CompareAtPrice = saw_variant_compare_at_price %}
  {% if base_product.compare_at_price_min != 0 %}{% assign WCItem_CompareAtPriceMin = base_product.compare_at_price_min %}{% else %}{% assign WCItem_CompareAtPriceMin = base_product.price_min %}{% endif %}
  {% if base_product.compare_at_price_max != 0 %}{% assign WCItem_CompareAtPriceMax = base_product.compare_at_price_max %}{% else %}{% assign WCItem_CompareAtPriceMax = base_product.price_max %}{% endif %}
  {% assign WCItem_OriginalLinePrice = WCItem_OriginalPrice | round | times: item.quantity %}
  {% assign WCItem_FinalLinePrice = WCItem_FinalPrice | round | times: item.quantity %}
  {% assign WCItem_LinePrice = WCItem_Price | round | times: item.quantity %}
{% endif %}
{% comment %} Wholesale_Club_Item_Prices End {% endcomment %}

                            <li class="ets_fs_ic_data_item">
                                <a href="{{ item.url }}" class="ets_fs_ic_link_item">
                                    <div class="ets_fs_ic_data_item_wrapper {% if search_type.value != 'pages' %}has_img{% endif %}">
                                        {% if search_type.value != 'pages' %}
                                        <div class="ets_fs_ic_data_item_img_wrapper">
                                            <img onerror="etsFsOnErrorImg(this)" class="ets_fs_ic_item_img" src="{% if item.image %}{{ item.image.src }}{% endif %}" alt="{{ item.title }}" />
                                        </div>
                                        {% endif %}
                                        <div class="ets_fs_ic_data_item_content">
                                            <div class="ets_fs_ic_data_item_title">{{ item.title }}</div>
                                            {% if search_type.value == 'products' %}
                                            <div class="ets_fs_ic_data_item_meta_data">
                                                {% if WCItem_CompareAtPrice > WCItem_Price %}
                                                <span class="ets_fs_ic_product_price--regular-price">{{ item.compare_at_price_to_display }}</span>
                                                {% endif %}
                                                <span class="ets_fs_ic_product_price--sale-price">{{ item.price_to_display }}</span>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>
                {% elsif init == true %}
                <div class="ets_fs_ic_section_item">
                    <div class="ets_fs_ic_section_header">
                        <div class="ets_fs_ic_section_title">{{ search_type.label }}</div>
                    </div>
                    <div class="ets_fs_ic_section_body">
                        <ul class="ets_fs_ic_list_result">
                            <li>
                                <div class="ets_fs_ic_loading">Loading...</div>
                            </li>
                        </ul>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            <div class="ets_fs_ic_footer">
                <a href="/pages/search-result-data?q={{ query }}" class="ets_fs_ic_view_all">
                <span class="iconsvg_search"><svg width="14" height="14" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg>
                            </span> View all results</a>
            </div>
        </div>
        {% else %}
        <div class="ets_fs_ic_wrapper ets_fs_ic_no_result desktop {% if alignment %} {{ alignment }} {% endif %}">
            <div class="ets_fs_ic_sections">
                {% if query and query != "" %}
                <p class="ets_fs_no_data ets_fs_no_data_alert">No data found for "{{ query }}"</p>
                {% endif %}
                <div class="ets_fs_ic_section_header">
                    <div class="ets_fs_ic_section_title">

                        {% if data.no_result.total > 0 %}
                        <span>Other products you might also like</span>
                        {% endif %}
                    </div>
                </div>
                {% if data.no_result.total > 0 %}
                <div class="ets_fs_ic_section_body">
                    <ul class="ets_fs_ic_list_result">
                        {% for item in data.no_result.list  %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: item %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

{% comment %} Wholesale_Club_Item_Prices Start {% endcomment %}
{% if item.product %}{% assign base_product = item.product %}{% else %}{% assign base_product = item %}{% endif %}
{% if item.variant %}{% assign base_variant = item.variant %}{% else %}{% assign base_variant = item.selected_or_first_available_variant %}{% endif %}

{% if shop.metafields.sawholesale['base_price'] == blank %}
  {% assign base_price = 'compare_at_price' %}
{% else %}
  {% assign base_price = shop.metafields.sawholesale['base_price'] %}
{% endif %}

{% assign saw_discount = 0 %}{% assign saw_has_discount = false %}

{% if customer.tags != blank %}
  {% for mf in base_product.metafields.sawholesale %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: mf %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

    {% capture product_customer_tag %}{{ mf | first | replace: 'discount_', '' }}{% endcapture %}
    {% if customer.tags contains product_customer_tag %}
      {% assign saw_has_discount = true %}
      {% assign discount_key = product_customer_tag | prepend: 'discount_' %}
      {% assign price_key = product_customer_tag | prepend: 'price_' %}
      {% assign saw_discount = base_product.metafields.sawholesale[discount_key] | divided_by: 100.0 %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign saw_discount = 1 | minus: saw_discount %}

{% if base_price == 'price' or base_variant.compare_at_price == blank  or base_variant.compare_at_price == 0 or base_variant.compare_at_price < base_variant.price %}
  {% assign saw_variant_compare_at_price = base_variant.price %}
{% else %}
  {% assign saw_variant_compare_at_price = base_variant.compare_at_price %}
{% endif %}

{% assign cpe = shop.metafields.sawholesale['cpe'] | default: "true" %}
{% if base_variant.metafields.sawholesale[price_key] != blank and cpe == "true" %}
  {% assign saw_variant_price = base_variant.metafields.sawholesale[price_key] %}
{% else %}
  {% assign saw_variant_price = saw_variant_compare_at_price | times: saw_discount %}
{% endif %}

{% if saw_has_discount == false or saw_variant_price >= saw_variant_compare_at_price %}
  {% assign WCItem_OriginalPrice = item.original_price %}
  {% assign WCItem_FinalPrice = item.final_price %}
  {% assign WCItem_Price = item.price %}
  {% assign WCItem_PriceMin = item.price_min %}
  {% assign WCItem_PriceMax = item.price_max %}
  {% assign WCItem_CompareAtPrice = item.compare_at_price %}
  {% assign WCItem_CompareAtPriceMin = item.compare_at_price_min %}
  {% assign WCItem_CompareAtPriceMax = item.compare_at_price_max %}
  {% assign WCItem_OriginalLinePrice = item.original_line_price %}
  {% assign WCItem_FinalLinePrice = item.final_line_price %}
  {% assign WCItem_LinePrice = item.line_price %}
{% else %}
  {% assign WCItem_OriginalPrice = saw_variant_compare_at_price %}
  {% assign WCItem_FinalPrice = saw_variant_price %}
  {% assign WCItem_Price = saw_variant_price %}
  {% assign WCItem_PriceMin = item.price_min | times: saw_discount %}
  {% assign WCItem_PriceMax = item.price_max | times: saw_discount %}
  {% assign WCItem_CompareAtPrice = saw_variant_compare_at_price %}
  {% if base_product.compare_at_price_min != 0 %}{% assign WCItem_CompareAtPriceMin = base_product.compare_at_price_min %}{% else %}{% assign WCItem_CompareAtPriceMin = base_product.price_min %}{% endif %}
  {% if base_product.compare_at_price_max != 0 %}{% assign WCItem_CompareAtPriceMax = base_product.compare_at_price_max %}{% else %}{% assign WCItem_CompareAtPriceMax = base_product.price_max %}{% endif %}
  {% assign WCItem_OriginalLinePrice = WCItem_OriginalPrice | round | times: item.quantity %}
  {% assign WCItem_FinalLinePrice = WCItem_FinalPrice | round | times: item.quantity %}
  {% assign WCItem_LinePrice = WCItem_Price | round | times: item.quantity %}
{% endif %}
{% comment %} Wholesale_Club_Item_Prices End {% endcomment %}

                        <li>
                            <div class="ets_fs_ic_data_item">
                                <a href="/products/{{ item.handle }}" class="ets_fs_ic_link_item">
                                    <div class="ets_fs_ic_data_item_wrapper has_img">
                                        <div class="ets_fs_ic_data_item_img_wrapper">
                                            <img onerror="etsFsOnErrorImg(this)" class="ets_fs_ic_item_img" src="{% if item.image %}{{ item.image.src }}{% endif %}" alt="{{ item.title }}" />
                                        </div>
                                        <div class="ets_fs_ic_data_item_content">
                                            <div class="ets_fs_ic_data_item_title">{{ item.title }}</div>
                                            <div class="ets_fs_ic_data_item_meta_data">
                                                {% if WCItem_CompareAtPrice > WCItem_Price %}
                                                <span class="ets_fs_ic_product_price--regular-price">{{ item.compare_at_price_to_display }}</span>
                                                {% endif %}
                                                <span class="ets_fs_ic_product_price--sale-price">{{ item.price_to_display }}</span>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        {% comment %} for mobile {% endcomment %}
        {% if isNoResult == false %}
        <div class="ets_fs_ic_wrapper layout1 mobile {% if alignment %} {{ alignment }} {% endif %}">
            <div class="ets_fs_ic_sections">
                {% for search_type in search_types %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: search_type %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}


                {% if data[search_type.value].total > 0 %}
                <div class="ets_fs_ic_section_item ets_fs_ic_section_{{ search_type.value }} ">
                    <div class="ets_fs_ic_section_header">
                        <div class="ets_fs_ic_section_title">{{ search_type.label }}</div>
                        <span class="ets_fs_ic_section_total"><span class="ets_fs_ic_section_total_nb">{% if init %}--{% else %}({{ data[search_type.value].total }}){% endif %}</span></span>
                    </div>
                    {% if search_type.value == 'suggestions' %}
                    <div class="ets_fs_ic_section_body">
                        <ul class="ets_fs_ic_list_result">
                            {% for item in data[search_type.value].list  %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: item %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

{% comment %} Wholesale_Club_Item_Prices Start {% endcomment %}
{% if item.product %}{% assign base_product = item.product %}{% else %}{% assign base_product = item %}{% endif %}
{% if item.variant %}{% assign base_variant = item.variant %}{% else %}{% assign base_variant = item.selected_or_first_available_variant %}{% endif %}

{% if shop.metafields.sawholesale['base_price'] == blank %}
  {% assign base_price = 'compare_at_price' %}
{% else %}
  {% assign base_price = shop.metafields.sawholesale['base_price'] %}
{% endif %}

{% assign saw_discount = 0 %}{% assign saw_has_discount = false %}

{% if customer.tags != blank %}
  {% for mf in base_product.metafields.sawholesale %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: mf %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

    {% capture product_customer_tag %}{{ mf | first | replace: 'discount_', '' }}{% endcapture %}
    {% if customer.tags contains product_customer_tag %}
      {% assign saw_has_discount = true %}
      {% assign discount_key = product_customer_tag | prepend: 'discount_' %}
      {% assign price_key = product_customer_tag | prepend: 'price_' %}
      {% assign saw_discount = base_product.metafields.sawholesale[discount_key] | divided_by: 100.0 %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign saw_discount = 1 | minus: saw_discount %}

{% if base_price == 'price' or base_variant.compare_at_price == blank  or base_variant.compare_at_price == 0 or base_variant.compare_at_price < base_variant.price %}
  {% assign saw_variant_compare_at_price = base_variant.price %}
{% else %}
  {% assign saw_variant_compare_at_price = base_variant.compare_at_price %}
{% endif %}

{% assign cpe = shop.metafields.sawholesale['cpe'] | default: "true" %}
{% if base_variant.metafields.sawholesale[price_key] != blank and cpe == "true" %}
  {% assign saw_variant_price = base_variant.metafields.sawholesale[price_key] %}
{% else %}
  {% assign saw_variant_price = saw_variant_compare_at_price | times: saw_discount %}
{% endif %}

{% if saw_has_discount == false or saw_variant_price >= saw_variant_compare_at_price %}
  {% assign WCItem_OriginalPrice = item.original_price %}
  {% assign WCItem_FinalPrice = item.final_price %}
  {% assign WCItem_Price = item.price %}
  {% assign WCItem_PriceMin = item.price_min %}
  {% assign WCItem_PriceMax = item.price_max %}
  {% assign WCItem_CompareAtPrice = item.compare_at_price %}
  {% assign WCItem_CompareAtPriceMin = item.compare_at_price_min %}
  {% assign WCItem_CompareAtPriceMax = item.compare_at_price_max %}
  {% assign WCItem_OriginalLinePrice = item.original_line_price %}
  {% assign WCItem_FinalLinePrice = item.final_line_price %}
  {% assign WCItem_LinePrice = item.line_price %}
{% else %}
  {% assign WCItem_OriginalPrice = saw_variant_compare_at_price %}
  {% assign WCItem_FinalPrice = saw_variant_price %}
  {% assign WCItem_Price = saw_variant_price %}
  {% assign WCItem_PriceMin = item.price_min | times: saw_discount %}
  {% assign WCItem_PriceMax = item.price_max | times: saw_discount %}
  {% assign WCItem_CompareAtPrice = saw_variant_compare_at_price %}
  {% if base_product.compare_at_price_min != 0 %}{% assign WCItem_CompareAtPriceMin = base_product.compare_at_price_min %}{% else %}{% assign WCItem_CompareAtPriceMin = base_product.price_min %}{% endif %}
  {% if base_product.compare_at_price_max != 0 %}{% assign WCItem_CompareAtPriceMax = base_product.compare_at_price_max %}{% else %}{% assign WCItem_CompareAtPriceMax = base_product.price_max %}{% endif %}
  {% assign WCItem_OriginalLinePrice = WCItem_OriginalPrice | round | times: item.quantity %}
  {% assign WCItem_FinalLinePrice = WCItem_FinalPrice | round | times: item.quantity %}
  {% assign WCItem_LinePrice = WCItem_Price | round | times: item.quantity %}
{% endif %}
{% comment %} Wholesale_Club_Item_Prices End {% endcomment %}

                            <li class="ets_fs_ic_data_item"><a onclick="return etsFsOnClickSuggestion(this, '{{ item.key_word }}')" class="ets_fs_ic_link_item" href="/pages/search-result-data?q={{ item.key_word }}">{{ item.key_word }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% else %}
                    <div class="ets_fs_ic_section_body">
                        <ul class="ets_fs_ic_list_result">
                            {% for item in data[search_type.value].list  %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: item %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

{% comment %} Wholesale_Club_Item_Prices Start {% endcomment %}
{% if item.product %}{% assign base_product = item.product %}{% else %}{% assign base_product = item %}{% endif %}
{% if item.variant %}{% assign base_variant = item.variant %}{% else %}{% assign base_variant = item.selected_or_first_available_variant %}{% endif %}

{% if shop.metafields.sawholesale['base_price'] == blank %}
  {% assign base_price = 'compare_at_price' %}
{% else %}
  {% assign base_price = shop.metafields.sawholesale['base_price'] %}
{% endif %}

{% assign saw_discount = 0 %}{% assign saw_has_discount = false %}

{% if customer.tags != blank %}
  {% for mf in base_product.metafields.sawholesale %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: mf %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

    {% capture product_customer_tag %}{{ mf | first | replace: 'discount_', '' }}{% endcapture %}
    {% if customer.tags contains product_customer_tag %}
      {% assign saw_has_discount = true %}
      {% assign discount_key = product_customer_tag | prepend: 'discount_' %}
      {% assign price_key = product_customer_tag | prepend: 'price_' %}
      {% assign saw_discount = base_product.metafields.sawholesale[discount_key] | divided_by: 100.0 %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign saw_discount = 1 | minus: saw_discount %}

{% if base_price == 'price' or base_variant.compare_at_price == blank  or base_variant.compare_at_price == 0 or base_variant.compare_at_price < base_variant.price %}
  {% assign saw_variant_compare_at_price = base_variant.price %}
{% else %}
  {% assign saw_variant_compare_at_price = base_variant.compare_at_price %}
{% endif %}

{% assign cpe = shop.metafields.sawholesale['cpe'] | default: "true" %}
{% if base_variant.metafields.sawholesale[price_key] != blank and cpe == "true" %}
  {% assign saw_variant_price = base_variant.metafields.sawholesale[price_key] %}
{% else %}
  {% assign saw_variant_price = saw_variant_compare_at_price | times: saw_discount %}
{% endif %}

{% if saw_has_discount == false or saw_variant_price >= saw_variant_compare_at_price %}
  {% assign WCItem_OriginalPrice = item.original_price %}
  {% assign WCItem_FinalPrice = item.final_price %}
  {% assign WCItem_Price = item.price %}
  {% assign WCItem_PriceMin = item.price_min %}
  {% assign WCItem_PriceMax = item.price_max %}
  {% assign WCItem_CompareAtPrice = item.compare_at_price %}
  {% assign WCItem_CompareAtPriceMin = item.compare_at_price_min %}
  {% assign WCItem_CompareAtPriceMax = item.compare_at_price_max %}
  {% assign WCItem_OriginalLinePrice = item.original_line_price %}
  {% assign WCItem_FinalLinePrice = item.final_line_price %}
  {% assign WCItem_LinePrice = item.line_price %}
{% else %}
  {% assign WCItem_OriginalPrice = saw_variant_compare_at_price %}
  {% assign WCItem_FinalPrice = saw_variant_price %}
  {% assign WCItem_Price = saw_variant_price %}
  {% assign WCItem_PriceMin = item.price_min | times: saw_discount %}
  {% assign WCItem_PriceMax = item.price_max | times: saw_discount %}
  {% assign WCItem_CompareAtPrice = saw_variant_compare_at_price %}
  {% if base_product.compare_at_price_min != 0 %}{% assign WCItem_CompareAtPriceMin = base_product.compare_at_price_min %}{% else %}{% assign WCItem_CompareAtPriceMin = base_product.price_min %}{% endif %}
  {% if base_product.compare_at_price_max != 0 %}{% assign WCItem_CompareAtPriceMax = base_product.compare_at_price_max %}{% else %}{% assign WCItem_CompareAtPriceMax = base_product.price_max %}{% endif %}
  {% assign WCItem_OriginalLinePrice = WCItem_OriginalPrice | round | times: item.quantity %}
  {% assign WCItem_FinalLinePrice = WCItem_FinalPrice | round | times: item.quantity %}
  {% assign WCItem_LinePrice = WCItem_Price | round | times: item.quantity %}
{% endif %}
{% comment %} Wholesale_Club_Item_Prices End {% endcomment %}

                            <li class="ets_fs_ic_data_item">
                                <a href="{{ item.url }}" class="ets_fs_ic_link_item">
                                    <div class="ets_fs_ic_data_item_wrapper {% if search_type.value != 'pages' %}has_img{% endif %}">
                                        {% if search_type.value != 'pages' %}
                                        <div class="ets_fs_ic_data_item_img_wrapper">
                                            <img onerror="etsFsOnErrorImg(this)" class="ets_fs_ic_item_img" src="{% if item.image %}{{ item.image.src }}{% endif %}" alt="{{ item.title }}" />
                                        </div>
                                        {% endif %}
                                        <div class="ets_fs_ic_data_item_content">
                                            <div class="ets_fs_ic_data_item_title">{{ item.title }}</div>
                                            {% if search_type.value == 'products' %}
                                            <div class="ets_fs_ic_data_item_meta_data">
                                                {% if WCItem_CompareAtPrice > WCItem_Price %}
                                                <span class="ets_fs_ic_product_price--regular-price">{{ item.compare_at_price_to_display }}</span>
                                                {% endif %}
                                                <span class="ets_fs_ic_product_price--sale-price">{{ item.price_to_display }}</span>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>
                {% elsif init == true %}
                <div class="ets_fs_ic_section_item">
                    <div class="ets_fs_ic_section_header">
                        <div class="ets_fs_ic_section_title">{{ search_type.label }}</div>
                    </div>
                    <div class="ets_fs_ic_section_body">
                        <ul class="ets_fs_ic_list_result">
                            <li>
                                <div class="ets_fs_ic_loading">Loading...</div>
                            </li>
                        </ul>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            <div class="ets_fs_ic_footer">
                <a href="/pages/search-result-data?q={{ query }}" class="ets_fs_ic_view_all">
                <span class="iconsvg_search"><svg width="14" height="14" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg>
                            </span> View all results</a>
            </div>
        </div>
        {% else %}
        <div class="ets_fs_ic_wrapper ets_fs_ic_no_result mobile {% if alignment %} {{ alignment }} {% endif %}">
            <div class="ets_fs_ic_sections">
                {% if query and query != "" %}
                <p class="ets_fs_no_data ets_fs_no_data_alert">No data found for "{{ query }}"</p>
                {% endif %}
                <div class="ets_fs_ic_section_header">
                    <div class="ets_fs_ic_section_title">

                        {% if data.no_result.total > 0 %}
                        <span>Other products you might also like</span>
                        {% endif %}
                    </div>
                </div>
                {% if data.no_result.total > 0 %}
                <div class="ets_fs_ic_section_body">
                    <ul class="ets_fs_ic_list_result">
                        {% for item in data.no_result.list  %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: item %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

{% comment %} Wholesale_Club_Item_Prices Start {% endcomment %}
{% if item.product %}{% assign base_product = item.product %}{% else %}{% assign base_product = item %}{% endif %}
{% if item.variant %}{% assign base_variant = item.variant %}{% else %}{% assign base_variant = item.selected_or_first_available_variant %}{% endif %}

{% if shop.metafields.sawholesale['base_price'] == blank %}
  {% assign base_price = 'compare_at_price' %}
{% else %}
  {% assign base_price = shop.metafields.sawholesale['base_price'] %}
{% endif %}

{% assign saw_discount = 0 %}{% assign saw_has_discount = false %}

{% if customer.tags != blank %}
  {% for mf in base_product.metafields.sawholesale %}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop Start {% endcomment %}
{%- capture hide_resource -%}{% render "wc_product_visibility", resource: mf %}{%- endcapture -%}
{%- if hide_resource == "true" -%}
  {% continue %}
{%- endif -%}
{% comment %} Wholesale_Club_Product_Visibility_For_Loop End {% endcomment %}

    {% capture product_customer_tag %}{{ mf | first | replace: 'discount_', '' }}{% endcapture %}
    {% if customer.tags contains product_customer_tag %}
      {% assign saw_has_discount = true %}
      {% assign discount_key = product_customer_tag | prepend: 'discount_' %}
      {% assign price_key = product_customer_tag | prepend: 'price_' %}
      {% assign saw_discount = base_product.metafields.sawholesale[discount_key] | divided_by: 100.0 %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign saw_discount = 1 | minus: saw_discount %}

{% if base_price == 'price' or base_variant.compare_at_price == blank  or base_variant.compare_at_price == 0 or base_variant.compare_at_price < base_variant.price %}
  {% assign saw_variant_compare_at_price = base_variant.price %}
{% else %}
  {% assign saw_variant_compare_at_price = base_variant.compare_at_price %}
{% endif %}

{% assign cpe = shop.metafields.sawholesale['cpe'] | default: "true" %}
{% if base_variant.metafields.sawholesale[price_key] != blank and cpe == "true" %}
  {% assign saw_variant_price = base_variant.metafields.sawholesale[price_key] %}
{% else %}
  {% assign saw_variant_price = saw_variant_compare_at_price | times: saw_discount %}
{% endif %}

{% if saw_has_discount == false or saw_variant_price >= saw_variant_compare_at_price %}
  {% assign WCItem_OriginalPrice = item.original_price %}
  {% assign WCItem_FinalPrice = item.final_price %}
  {% assign WCItem_Price = item.price %}
  {% assign WCItem_PriceMin = item.price_min %}
  {% assign WCItem_PriceMax = item.price_max %}
  {% assign WCItem_CompareAtPrice = item.compare_at_price %}
  {% assign WCItem_CompareAtPriceMin = item.compare_at_price_min %}
  {% assign WCItem_CompareAtPriceMax = item.compare_at_price_max %}
  {% assign WCItem_OriginalLinePrice = item.original_line_price %}
  {% assign WCItem_FinalLinePrice = item.final_line_price %}
  {% assign WCItem_LinePrice = item.line_price %}
{% else %}
  {% assign WCItem_OriginalPrice = saw_variant_compare_at_price %}
  {% assign WCItem_FinalPrice = saw_variant_price %}
  {% assign WCItem_Price = saw_variant_price %}
  {% assign WCItem_PriceMin = item.price_min | times: saw_discount %}
  {% assign WCItem_PriceMax = item.price_max | times: saw_discount %}
  {% assign WCItem_CompareAtPrice = saw_variant_compare_at_price %}
  {% if base_product.compare_at_price_min != 0 %}{% assign WCItem_CompareAtPriceMin = base_product.compare_at_price_min %}{% else %}{% assign WCItem_CompareAtPriceMin = base_product.price_min %}{% endif %}
  {% if base_product.compare_at_price_max != 0 %}{% assign WCItem_CompareAtPriceMax = base_product.compare_at_price_max %}{% else %}{% assign WCItem_CompareAtPriceMax = base_product.price_max %}{% endif %}
  {% assign WCItem_OriginalLinePrice = WCItem_OriginalPrice | round | times: item.quantity %}
  {% assign WCItem_FinalLinePrice = WCItem_FinalPrice | round | times: item.quantity %}
  {% assign WCItem_LinePrice = WCItem_Price | round | times: item.quantity %}
{% endif %}
{% comment %} Wholesale_Club_Item_Prices End {% endcomment %}

                        <li>
                            <div class="ets_fs_ic_data_item">
                                <a href="/products/{{ item.handle }}" class="ets_fs_ic_link_item">
                                    <div class="ets_fs_ic_data_item_wrapper has_img">
                                        <div class="ets_fs_ic_data_item_img_wrapper">
                                            <img onerror="etsFsOnErrorImg(this)" class="ets_fs_ic_item_img" src="{% if item.image %}{{ item.image.src }}{% endif %}" alt="{{ item.title }}" />
                                        </div>
                                        <div class="ets_fs_ic_data_item_content">
                                            <div class="ets_fs_ic_data_item_title">{{ item.title }}</div>
                                            <div class="ets_fs_ic_data_item_meta_data">
                                                {% if WCItem_CompareAtPrice > WCItem_Price %}
                                                <span class="ets_fs_ic_product_price--regular-price">{{ item.compare_at_price_to_display }}</span>
                                                {% endif %}
                                                <span class="ets_fs_ic_product_price--sale-price">{{ item.price_to_display }}</span>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
{% endraw %}
